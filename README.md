# cpp-stc-sma
Простое бегущее среднее по массиву vector для чисел с плавающей запятой

## Структура
### Библиотека sma-lib
Основная библиотека, в которой реализован метод. Все методы реализованы в header'ах.

Выбранный алгоритм имеет временную сложность O(n), Пространственную O(n+k), где n - длинна входного массива, k- ширина окна.
### generate утилита для тестирования производительности
Тривиальная утилита, выводящая результаты в out.csv, который затем можно загрузить в Excel для дальнейшего анализа.

Параметры заданы в виде констант в файле [main.cpp](/generate/src/main.cpp):
* DATA_SIZE - Размер данных
* MIN_RANDOM_VALUE,MAX_RANDOM_VALUE - диапазон генерации случайного числа

## Сборка
Проект использует сборочную систему CMake. Простейший пример сборки в bash такой:
```bash
mkdir build
cd $_
cmake ..
cmake --build .
```
Утилита будет находится в папке `build/generate/`

## Тестирование производительности
Все артефакты тестирования представлены в [results](/results). Естественно, мне лень отключать swap, turbo boost и прочие особенности системы, которые могут увеличить разброс данных.

Так как выбранный алгоритм зависит в значительной мере от размера данных а не размера окна, то видно что время выполнения функции неизменно и находится в пределах погрешности. Округлено до 3 значащих чисел

| Размер окна | отс./сек для float |  отс./сек для double |
|-------------|--------------------|----------------------|
| 4           | 255000000          | 217000000            |
| 8           | 255000000          | 221000000            |
| 16          | 256000000          | 219000000            |
| 32          | 255000000          | 221000000            |
| 64          | 255000000          | 209000000            |
| 128         | 255000000          | 210000000            |


График этих значений выглядит таким образом:
![img](/results/graph.png)

# Тестирование
Тестирование проводилось с помощью встроенных тестов, которые требуют отдельного включения:

```bash
cmake -DENABLE_TESTS=ON ..
cmake --build .
ctest .
```